var Page;!function(e){!function(e){var r=document.getElementById("error-messages");function n(e){return r.querySelector("span[id=error-message-"+e+"]")}r||console.error("Cannot find element 'error-messages'."),e.setErrorMessage=function(e,o){if(r){var a=n(e);if(a)return void(a.innerHTML=o);var t=document.createElement("span");t.id="error-message-"+e,t.innerText=o,r.appendChild(t),r.appendChild(document.createElement("br"))}},e.removeErrorMessage=function(e){if(r){var o=n(e);if(o){var a=o.nextElementSibling;a&&r.removeChild(a),r.removeChild(o)}}}}(e.Demopage||(e.Demopage={}))}(Page||(Page={}));
var Page;!function(e){!function(e){!function(e){var r="page",t=function(){function e(r){this.queryParameters={};var t=r.indexOf(e.queryDelimiter);if(t<0)this.baseUrl=r;else{this.baseUrl=r.substring(0,t);for(var n=0,a=r.substring(t+e.queryDelimiter.length).split(e.parameterDelimiter);n<a.length;n++){var i=a[n],o=i.split(e.keyValueDelimiter);if(2===o.length){var l=decodeURIComponent(o[0]),s=decodeURIComponent(o[1]);this.queryParameters[l]=s}else console.log("Unable to parse query string parameter '"+i+"'.")}}}return e.prototype.setQueryParameter=function(e,r){null===r?delete this.queryParameters[e]:this.queryParameters[e]=r},e.prototype.loopOnParameters=function(e,r){for(var t=0,n=Object.keys(this.queryParameters);t<n.length;t++){var a=n[t];if(0===a.indexOf(e)&&a.length>e.length){var i=this.queryParameters[a];r(a.substring(e.length),i)}}},e.prototype.buildUrl=function(){for(var r=[],t=0,n=Object.keys(this.queryParameters);t<n.length;t++){var a=n[t],i=this.queryParameters[a],o=encodeURIComponent(a),l=encodeURIComponent(i);r.push(o+e.keyValueDelimiter+l)}var s=r.join(e.parameterDelimiter);return s?this.baseUrl+e.queryDelimiter+s:this.baseUrl},e.queryDelimiter="?",e.parameterDelimiter="&",e.keyValueDelimiter="=",e}();function n(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return e.join(":")+":"}function a(e){window.history.replaceState("","",e)}e.loopOnParameters=function(e,a){var i=new t(window.location.href),o=n(r,e);i.loopOnParameters(o,a)},e.setQueryParameter=function(e,i,o){var l=new t(window.location.href),s=n(r,e);l.setQueryParameter(s+i,o),a(l.buildUrl())},e.removeQueryParameter=function(e,i){var o=new t(window.location.href),l=n(r,e);o.setQueryParameter(l+i,null),a(o.buildUrl())}}(e.URL||(e.URL={})),function(e){e.callAfterDOMLoaded=function(e){"loading"===document.readyState?document.addEventListener("DOMContentLoaded",e):e()}}(e.Events||(e.Events={}))}(e.Helpers||(e.Helpers={}))}(Page||(Page={}));
var Page;!function(e){!function(e){e.setVisibility=function(e,n){var o,t,i=(o="div#control-"+e,(t=document.querySelector(o))||console.error("Cannot find control '"+o+"'."),t);i&&(i.style.display=n?"":"none")}}(e.Controls||(e.Controls={}))}(Page||(Page={})),function(e){!function(e){e.setVisibility=function(e,n){var o,t,i=(o="section#section-"+e,(t=document.querySelector(o))||console.error("Cannot find section '"+o+"'."),t);i&&(i.style.display=n?"":"none",function(e){function n(e){return"hr"===e.tagName.toLowerCase()}function o(e){return"none"!==e.style.display}for(var t=e.querySelectorAll("section, hr"),i=!1,r=0;r<t.length;r++)n(t[r])?(t[r].style.display=i?"none":"",i=!0):o(t[r])&&(i=!1);for(r=0;r<t.length;r++)if(n(t[r]))t[r].style.display="none";else if(o(t[r]))break;for(r=t.length-1;r>=0;r--)if(n(t[r]))t[r].style.display="none";else if(o(t[r]))break}(i.parentElement))}}(e.Sections||(e.Sections={}))}(Page||(Page={}));
var Page;!function(e){!function(t){var n,r,a=function(){function e(t){var n=this;this.onInputObservers=[],this.onChangeObservers=[],this.inputElement=t.querySelector("input[type='range']"),this.progressLeftElement=t.querySelector(".range-progress-left"),this.tooltipElement=t.querySelector("output.range-tooltip"),this.id=this.inputElement.id;var a=+this.inputElement.min,i=+this.inputElement.max,o=+this.inputElement.step;this.nbDecimalsToDisplay=e.getMaxNbDecimals(a,i,o),this.inputElement.addEventListener("input",function(e){e.stopPropagation(),n.reloadValue(),n.callSpecificObservers(n.onInputObservers)}),this.inputElement.addEventListener("change",function(e){e.stopPropagation(),n.reloadValue(),r.storeState(n),n.callSpecificObservers(n.onChangeObservers)}),this.reloadValue()}return Object.defineProperty(e.prototype,"value",{get:function(){return this._value},set:function(e){this.inputElement.value=""+e,this.reloadValue()},enumerable:!1,configurable:!0}),e.prototype.callObservers=function(){this.callSpecificObservers(this.onInputObservers),this.callSpecificObservers(this.onChangeObservers)},e.prototype.callSpecificObservers=function(e){for(var t=0,n=e;t<n.length;t++){(0,n[t])(this.value)}},e.prototype.updateAppearance=function(){var e,t=(+this.inputElement.value-+this.inputElement.min)/(+this.inputElement.max-+this.inputElement.min);t=Math.max(0,Math.min(1,t)),this.progressLeftElement.style.width=100*t+"%",e=this.nbDecimalsToDisplay<0?this.inputElement.value:(+this.inputElement.value).toFixed(this.nbDecimalsToDisplay),this.tooltipElement.textContent=e},e.prototype.reloadValue=function(){this._value=+this.inputElement.value,this.updateAppearance()},e.getMaxNbDecimals=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=-1,a=0,i=t;a<i.length;a++){var o=i[a],s=e.nbDecimals(o);if(o<0)return-1;r<s&&(r=s)}return r},e.nbDecimals=function(e){var t=e.toString();return/^[0-9]+$/.test(t)?0:/^[0-9]+\.[0-9]+$/.test(t)?t.length-(t.indexOf(".")+1):-1},e}();!function(e){var t;e.getRangeById=function(n){return e.load(),t[n]||null},e.load=function(){void 0===t&&(t=function(){for(var e={},t=document.querySelectorAll(".range-container > input[type='range']"),n=0;n<t.length;n++){var r=t[n].parentElement;e[t[n].id]=new a(r)}return e}())}}(n||(n={})),function(t){var r="range";t.storeState=function(t){var n=""+t.value;e.Helpers.URL.setQueryParameter(r,t.id,n)},t.clearStoredState=function(t){e.Helpers.URL.removeQueryParameter(r,t.id)},t.applyStoredState=function(){e.Helpers.URL.loopOnParameters(r,function(t,a){var i=n.getRangeById(t);i?(i.value=+a,i.callObservers()):(console.log("Removing invalid query parameter '"+t+"="+a+"'."),e.Helpers.URL.removeQueryParameter(r,t))})}}(r||(r={})),e.Helpers.Events.callAfterDOMLoaded(function(){n.load(),r.applyStoredState()});var i=!!window.MSInputMethodContext&&!!document.documentMode;t.addObserver=function(e,t){var r=n.getRangeById(e);return!!r&&(i?r.onChangeObservers.push(t):r.onInputObservers.push(t),!0)},t.addLazyObserver=function(e,t){var r=n.getRangeById(e);return!!r&&(r.onChangeObservers.push(t),!0)},t.getValue=function(e){var t=n.getRangeById(e);return t?t.value:null},t.setValue=function(e,t){var r=n.getRangeById(e);r&&(r.value=t)},t.storeState=function(e){var t=n.getRangeById(e);r.storeState(t)},t.clearStoredState=function(e){var t=n.getRangeById(e);r.clearStoredState(t)}}(e.Range||(e.Range={}))}(Page||(Page={}));
var Page;!function(e){!function(t){var r,o,n=function(){function e(e){var t=this;this.observers=[],this.id=e.id,this.element=e,this.reloadValue(),this.element.addEventListener("change",function(){t.reloadValue(),o.storeState(t),t.callObservers()})}return Object.defineProperty(e.prototype,"checked",{get:function(){return this._checked},set:function(e){this.element.checked=e,this.reloadValue()},enumerable:!1,configurable:!0}),e.prototype.callObservers=function(){for(var e=0,t=this.observers;e<t.length;e++){(0,t[e])(this.checked)}},e.prototype.reloadValue=function(){this._checked=this.element.checked},e}();!function(e){var t;e.getCheckboxById=function(r){return e.load(),t[r]||null},e.load=function(){void 0===t&&(t=function(){for(var e={},t=document.querySelectorAll("div.checkbox > input[type=checkbox][id]"),r=0;r<t.length;r++){var o=new n(t[r]);e[o.id]=o}return e}())}}(r||(r={})),function(t){var o="checkbox",n="true",c="false";t.storeState=function(t){var r=t.checked?n:c;e.Helpers.URL.setQueryParameter(o,t.id,r)},t.clearStoredState=function(t){e.Helpers.URL.removeQueryParameter(o,t.id)},t.applyStoredState=function(){e.Helpers.URL.loopOnParameters(o,function(t,a){var i=r.getCheckboxById(t);!i||a!==n&&a!==c?(console.log("Removing invalid query parameter '"+t+"="+a+"'."),e.Helpers.URL.removeQueryParameter(o,t)):(i.checked=a===n,i.callObservers())})}}(o||(o={})),e.Helpers.Events.callAfterDOMLoaded(function(){r.load(),o.applyStoredState()}),t.addObserver=function(e,t){var o=r.getCheckboxById(e);return!!o&&(o.observers.push(t),!0)},t.setChecked=function(e,t){var o=r.getCheckboxById(e);o&&(o.checked=t)},t.isChecked=function(e){var t=r.getCheckboxById(e);return!!t&&t.checked},t.storeState=function(e){var t=r.getCheckboxById(e);o.storeState(t)},t.clearStoredState=function(e){var t=r.getCheckboxById(e);o.clearStoredState(t)}}(e.Checkbox||(e.Checkbox={}))}(Page||(Page={}));
var Page;!function(t){!function(t){var e,n=function(){function t(t){var e=this;this.observers=[],this.id=t.id,this.element=t,this.element.addEventListener("click",function(t){t.stopPropagation();for(var n=0,r=e.observers;n<r.length;n++){(0,r[n])()}},!1)}return Object.defineProperty(t.prototype,"label",{set:function(t){this.element.innerText=t},enumerable:!1,configurable:!0}),t}();!function(t){var e;t.getButtonById=function(t){return void 0===e&&(e=function(){for(var t={},e=document.querySelectorAll("button[id]"),r=0;r<e.length;r++){var o=new n(e[r]);t[o.id]=o}return t}()),e[t]||null}}(e||(e={})),t.addObserver=function(t,n){var r=e.getButtonById(t);return!!r&&(r.observers.push(n),!0)},t.setLabel=function(t,n){var r=e.getButtonById(t);r&&(r.label=n)}}(t.Button||(t.Button={}))}(Page||(Page={}));
var Page;!function(e){!function(t){var l,n,a=function(){function e(t){var l=this;this.observers=[],this.id=t.id,this.containerElement=t,this.currentValueElement=t.querySelector(".select-current-value"),this.valuesListElement=t.querySelector(".select-values-list"),this.placeholder=this.valuesListElement.dataset.placeholder,this.currentValue=this.currentValueElement.dataset.value,this.valueElements=[];for(var a=this.valuesListElement.querySelectorAll(".select-value[data-value]"),r=0;r<a.length;r++)this.valueElements.push(a[r]);this.containerElement.style.width=this.computeMinimumWidth()+"px",document.addEventListener("click",function(t){var a=t.target;if(l.containerElement.classList.contains(e.EXPANDED_CLASS)){if(l.valuesListElement.contains(a))for(var r=0,s=l.valueElements;r<s.length;r++){var i=s[r];i.contains(a)&&(l.currentValue=i.dataset.value,l.currentValueElement.dataset.value=l.currentValue,l.currentValueElement.textContent=i.textContent,n.storeState(l),l.callObservers())}l.containerElement.classList.remove(e.EXPANDED_CLASS)}else{l.currentValueElement.contains(a)&&l.containerElement.classList.add(e.EXPANDED_CLASS)}})}return Object.defineProperty(e.prototype,"value",{get:function(){return this.currentValue||null},set:function(e){if(null===e)this.currentValueElement.removeAttribute("data-value"),this.currentValueElement.textContent=this.placeholder,this.currentValue=null;else{for(var t=0,l=this.valueElements;t<l.length;t++){var n=l[t],a=n.dataset.value;if(a===e)return this.currentValue=a,this.currentValueElement.dataset.value=a,void(this.currentValueElement.textContent=n.textContent)}console.log('No "'+e+'" value for "'+this.id+'" select.')}},enumerable:!1,configurable:!0}),e.prototype.callObservers=function(){for(var e=0,t=this.observers;e<t.length;e++){(0,t[e])(this.value)}},e.prototype.computeMinimumWidth=function(){var e;this.valuesListElement.style.opacity="0",this.valuesListElement.style.width="auto",this.valuesListElement.style.fontWeight="bold",this.valuesListElement.style.display="block";var t=document.createElement("div");t.classList.add("select-value"),t.textContent=this.placeholder,this.valuesListElement.appendChild(t);var l=this.containerElement.parentNode,n=this.containerElement.nextSibling;l.removeChild(this.containerElement),document.body.appendChild(this.containerElement),e=this.valuesListElement.getBoundingClientRect().width,document.body.removeChild(this.containerElement),l.insertBefore(this.containerElement,n),this.valuesListElement.removeChild(t),this.valuesListElement.style.display="",this.valuesListElement.style.fontWeight="",this.valuesListElement.style.width="",this.valuesListElement.style.opacity="";return e+30},e.EXPANDED_CLASS="expanded",e}();!function(e){var t;e.getSelectById=function(l){return e.load(),t[l]||null},e.load=function(){void 0===t&&(t=function(){for(var e={},t=document.querySelectorAll(".select-container[id]"),l=0;l<t.length;l++){var n=new a(t[l]);e[n.id]=n}return e}())}}(l||(l={})),function(t){var n="select";t.storeState=function(t){e.Helpers.URL.setQueryParameter(n,t.id,t.value)},t.clearStoredState=function(t){e.Helpers.URL.removeQueryParameter(n,t.id)},t.applyStoredState=function(){e.Helpers.URL.loopOnParameters(n,function(t,a){var r=l.getSelectById(t);r?(r.value=a,r.callObservers()):(console.log("Removing invalid query parameter '"+t+"="+a+"'."),e.Helpers.URL.removeQueryParameter(n,t))})}}(n||(n={})),e.Helpers.Events.callAfterDOMLoaded(function(){l.load(),n.applyStoredState()}),t.addObserver=function(e,t){l.getSelectById(e).observers.push(t)},t.getValue=function(e){return l.getSelectById(e).value},t.setValue=function(e,t){l.getSelectById(e).value=t},t.storeState=function(e){var t=l.getSelectById(e);n.storeState(t)},t.clearStoredState=function(e){var t=l.getSelectById(e);n.clearStoredState(t)}}(e.Select||(e.Select={}))}(Page||(Page={}));
var Page;!function(e){!function(t){var r,a,n=function(){function e(t){var r=this;this.observers=[],this.id=e.computeShortId(t.id),this.inputElements=[];for(var n=t.querySelectorAll("input"),o=0;o<n.length;o++)this.inputElements.push(n[o]),n[o].addEventListener("change",function(e){e.stopPropagation(),r.reloadValues(),a.storeState(r),r.callObservers()},!1);this.reloadValues()}return e.computeShortId=function(t){if(t.lastIndexOf(e.ID_SUFFIX)!=t.length-e.ID_SUFFIX.length)throw new Error("Invalid tabs container id: '"+t+"'.");return t.substring(0,t.length-e.ID_SUFFIX.length)},Object.defineProperty(e.prototype,"values",{get:function(){return this._values},set:function(e){for(var t=0,r=this.inputElements;t<r.length;t++){for(var a=r[t],n=!1,o=0,s=e;o<s.length;o++){var l=s[o];if(a.value===l){n=!0;break}}a.checked=n}this.reloadValues()},enumerable:!1,configurable:!0}),e.prototype.callObservers=function(){for(var e=0,t=this.observers;e<t.length;e++){(0,t[e])(this._values)}},e.prototype.reloadValues=function(){for(var e=[],t=0,r=this.inputElements;t<r.length;t++){var a=r[t];a.checked&&e.push(a.value)}this._values=e},e.ID_SUFFIX="-id",e}();!function(e){var t;e.getTabsById=function(r){return e.load(),t[r]||null},e.load=function(){void 0===t&&(t=function(){for(var e={},t=document.querySelectorAll("div.tabs[id]"),r=0;r<t.length;r++){var a=new n(t[r]);e[a.id]=a}return e}())}}(r||(r={})),function(t){var a="tabs",n=";";t.storeState=function(t){var r=t.values.join(n);e.Helpers.URL.setQueryParameter(a,t.id,r)},t.clearStoredState=function(t){e.Helpers.URL.removeQueryParameter(a,t.id)},t.applyStoredState=function(){e.Helpers.URL.loopOnParameters(a,function(t,o){var s=o.split(n),l=r.getTabsById(t);l?(l.values=s,l.callObservers()):(console.log("Removing invalid query parameter '"+t+"="+o+"'."),e.Helpers.URL.removeQueryParameter(a,t))})}}(a||(a={})),e.Helpers.Events.callAfterDOMLoaded(function(){r.load(),a.applyStoredState()}),t.addObserver=function(e,t){var a=r.getTabsById(e);return!!a&&(a.observers.push(t),!0)},t.getValues=function(e){return r.getTabsById(e).values},t.setValues=function(e,t,n){void 0===n&&(n=!1);var o=r.getTabsById(e);o.values=t,n&&a.storeState(o)},t.storeState=function(e){var t=r.getTabsById(e);a.storeState(t)},t.clearStoredState=function(e){var t=r.getTabsById(e);a.clearStoredState(t)}}(e.Tabs||(e.Tabs={}))}(Page||(Page={}));
var Page;!function(e){!function(t){function r(e,t,r){return Math.max(t,Math.min(r,e))}function n(e,t,n){return r(Math.round(e),t,n)}function i(e,t){return(e%t+t)%t}var o;!function(e){function t(e){var t=e.toString(16).toUpperCase();return 2===t.length?t:"0"+t}e.parseHexa=function(e){return/^#[0-9a-fA-F]{6}$/.test(e)?e.toUpperCase():null},e.hsvToRgb=function(e){var t,r=e.h/60,o=e.s*e.v,a=o*(1-Math.abs(i(r,2)-1));t=r<=1?{r:o,g:a,b:0}:r<=2?{r:a,g:o,b:0}:r<=3?{r:0,g:o,b:a}:r<=4?{r:0,g:a,b:o}:r<=5?{r:a,g:0,b:o}:{r:o,g:0,b:a};var u=e.v-o;return t.r=n(255*(t.r+u),0,255),t.g=n(255*(t.g+u),0,255),t.b=n(255*(t.b+u),0,255),t},e.rgbToHsv=function(e){var t=e.r/255,r=e.g/255,n=e.b/255,o=Math.max(t,r,n),a=o-Math.min(t,r,n),u={h:0,s:0,v:o};return 0!==a&&(o===t?u.h=(r-n)/a%6*60:o===r?u.h=60*((n-t)/a+2):o===n&&(u.h=60*((t-r)/a+4))),0!==o&&(u.s=a/o),u.h=i(u.h,360),u},e.rgbToHex=function(e){return"#"+t(e.r)+t(e.g)+t(e.b)},e.hexToRgb=function(e){return{r:parseInt(e.substring(1,3),16),g:parseInt(e.substring(3,5),16),b:parseInt(e.substring(5,7),16)}}}(o||(o={}));var a,u,l=function(){function e(e){var t=this;this.observers=[],this.element=e,this.id=e.id,this.colorPreview=e.querySelector(".color-preview"),this.colorPreviewText=e.querySelector(".color-value"),this.updateVisiblePart(),this.element.addEventListener("click",function(){s.assignPopup(t)})}return Object.defineProperty(e.prototype,"value",{get:function(){return this.element.dataset.currentColor},set:function(e){if(this.value!==e){this.element.dataset.currentColor=e,this.updateVisiblePart();for(var t=o.hexToRgb(e),r=0,n=this.observers;r<n.length;r++){(0,n[r])(t)}}},enumerable:!1,configurable:!0}),e.prototype.attachPopup=function(e){this.element.parentElement.appendChild(e)},e.prototype.updateVisiblePart=function(){var e=this.value;this.colorPreview.style.background=e,this.colorPreviewText.textContent=e},e}();!function(e){var t;e.getColorPickerById=function(r){return e.load(),t[r]||null},e.load=function(){void 0===t&&(t=function(){for(var e={},t=document.querySelectorAll(".color-picker[id]"),r=0;r<t.length;r++){var n=new l(t[r]);e[t[r].id]=n}return e}())}}(a||(a={})),function(t){var r="color-picker";t.storeState=function(t){e.Helpers.URL.setQueryParameter(r,t.id,t.value)},t.clearStoredState=function(t){e.Helpers.URL.removeQueryParameter(r,t.id)},t.applyStoredState=function(){e.Helpers.URL.loopOnParameters(r,function(t,n){var i=a.getColorPickerById(t),u=o.parseHexa(n);i&&u?i.value=u:(console.log("Removing invalid query parameter '"+t+"="+n+"'."),e.Helpers.URL.removeQueryParameter(r,t))})}}(u||(u={}));var s=function(){function e(){var t=this;this.hsv={h:200,s:.75,v:.5},this.popupElement=e.buildElement("div",["popup","color-picker-popup"]),this.valueSaturationPicker=e.buildElement("div",["block","picker","value-saturation-picker"]),this.hueColorFilter=e.buildElement("span",["color-filter","outlined"]),this.valueSaturationPicker.appendChild(this.hueColorFilter);var i=e.buildElement("span",["color-filter","outlined"]);i.style.background="linear-gradient(to top, black, rgba(0,0,0,0))",this.valueSaturationPicker.appendChild(i),this.valueSaturationCursor=e.buildElement("span",["cursor"]),this.valueSaturationPicker.appendChild(this.valueSaturationCursor),this.popupElement.appendChild(this.valueSaturationPicker),this.huePicker=e.buildElement("div",["block","picker","hue-picker"]);var a=e.buildElement("span",["hue-bar"]);this.huePicker.appendChild(a),this.hueCursor=e.buildElement("span",["cursor"]),this.huePicker.appendChild(this.hueCursor),this.popupElement.appendChild(this.huePicker);var u=e.buildElement("div",["preview-block"]);this.previewColor=e.buildElement("div",["preview-color","outlined"]),this.previewColor.classList.add("block"),u.appendChild(this.previewColor);var l=e.buildElement("table",["block"]),s=e.buildPreviewText(l,"hexa"),p=e.buildElement("span");p.textContent="#",s.appendChild(p),this.previewHexaValue=document.createElement("input"),this.previewHexaValue.type="text",this.previewHexaValue.minLength=6,this.previewHexaValue.maxLength=6,this.previewHexaValue.size=6,this.previewHexaValue.pattern="[0-9a-fA-F]{6}",this.previewHexaValue.addEventListener("input",function(){var e="#"+t.previewHexaValue.value;if(o.parseHexa(e)){var r=o.hexToRgb(e),n=o.rgbToHsv(r);t.hsv.h=n.h,t.hsv.s=n.s,t.hsv.v=n.v,t.onInput()}}),s.appendChild(this.previewHexaValue),this.previewRgbValue=e.buildPreviewText(l,"rgb"),this.previewHslValue=e.buildPreviewText(l,"hsv"),u.appendChild(l),this.popupElement.appendChild(u),this.registerCursorEvent(this.huePicker,function(e){t.hsv.h=n(360*e.x,0,360),t.onInput()}),this.registerCursorEvent(this.valueSaturationPicker,function(n){t.hsv.s=r(n.x,0,1),t.hsv.v=r(1-n.y,0,1),t.onInput(),t.valueSaturationCursor.style.left=e.percentageString(n.x),t.valueSaturationCursor.style.top=e.percentageString(n.y)});var h=!1;this.popupElement.addEventListener("mousedown",function(){h=!0}),window.addEventListener("mouseup",function(e){!t.popupElement.contains(e.target)&&t.popupElement.parentElement&&!h&&t.popupElement.parentElement.removeChild(t.popupElement),h=!1})}return e.assignPopup=function(t){e.popup||(e.popup=new e),e.popup.attach(t)},e.prototype.updateAppearance=function(){var t=o.hsvToRgb(this.hsv),r=o.rgbToHex(t),n="rgb("+t.r+", "+t.g+", "+t.b+")",i="hsl("+Math.round(this.hsv.h)+", 100%, 50%)";this.hueColorFilter.style.background="linear-gradient(to right, white, "+i+")",this.hueCursor.style.background=i,this.valueSaturationCursor.style.background=n,this.previewColor.style.background=n,this.previewHexaValue.value=r.substring(1),this.previewRgbValue.textContent=t.r+", "+t.g+", "+t.b;var a=e.percentageString(this.hsv.s),u=e.percentageString(this.hsv.v);this.previewHslValue.textContent=Math.round(this.hsv.h)+"°, "+a+", "+u,this.hueCursor.style.left=e.percentageString(this.hsv.h/360),this.valueSaturationCursor.style.left=a,this.valueSaturationCursor.style.top=e.percentageString(1-this.hsv.v)},e.prototype.onInput=function(){var e=o.hsvToRgb(this.hsv),t=o.rgbToHex(e);this.updateAppearance(),this.currentControl&&(this.currentControl.value=t),u.storeState(this.currentControl)},e.prototype.attach=function(t){this.currentControl=t;var r=t.value,n=o.hexToRgb(r),i=o.rgbToHsv(n);e.popup.hsv.h=i.h,e.popup.hsv.v=i.v,e.popup.hsv.s=i.s,e.popup.updateAppearance(),this.popupElement.style.top="",this.popupElement.style.left="",this.currentControl.attachPopup(this.popupElement),this.fitPopupToContainer()},e.prototype.fitPopupToContainer=function(){if(this.popupElement.parentElement){var e=(document.querySelector(".controls-block")||document.body).getBoundingClientRect(),t=e.left+e.width-16,r=e.top+e.height-16;this.popupElement.style.maxWidth=e.width-32+"px",this.popupElement.style.maxHeight=e.height-32+"px";var n=this.popupElement.parentElement.getBoundingClientRect(),i=this.popupElement.getBoundingClientRect(),o=Math.max(0,e.left+16-n.left),a=Math.min(0,t-(n.left+i.width)),u=Math.max(0,e.top+16-n.top),l=Math.min(0,r-(n.top+i.height));this.popupElement.style.left=o+a+"px",this.popupElement.style.top=u+l+"px"}},e.prototype.registerCursorEvent=function(e,t){function r(t,r){var n=e.getBoundingClientRect(),i=(t-n.left)/n.width,o=(r-n.top)/n.height;return{x:Math.max(0,Math.min(1,i)),y:Math.max(0,Math.min(1,o))}}var n=e.querySelector(".cursor"),i={x:0,y:0},o=!1;e.addEventListener("mousedown",function(e){if(o=!0,i.x=0,i.y=0,n&&e.target===n){var a=n.getBoundingClientRect();i.x=.5*a.width-(e.clientX-a.left),i.y=.5*a.height-(e.clientY-a.top)}else{var u=r(e.clientX,e.clientY);t(u)}}),window.addEventListener("mouseup",function(){o=!1}),window.addEventListener("mousemove",function(e){if(o){var n=r(e.clientX+i.x,e.clientY+i.y);t(n)}});var a=[];e.addEventListener("touchstart",function(e){o=!0;for(var n=0===a.length,i=0;i<e.changedTouches.length;++i){for(var u=e.changedTouches[i],l=!1,s=0,p=a;s<p.length;s++){var h=p[s];if(u.identifier===h){l=!0;break}}l||a.push(u.identifier)}if(n&&a.length>0){var c=r(e.changedTouches[0].clientX,e.changedTouches[0].clientY);t(c)}},!1),window.addEventListener("touchend",function(e){for(var t=a.length>0,r=0;r<e.changedTouches.length;++r)for(var n=e.changedTouches[r],i=0;i<a.length;++i)n.identifier===a[i]&&(a.splice(i,1),i--);t&&0===a.length&&(o=!1)}),window.addEventListener("touchmove",function(e){if(a.length>0&&o)for(var n=e.changedTouches,i=0;i<n.length;++i)for(var u=n[i],l=0,s=a;l<s.length;l++){var p=s[l];if(u.identifier===p){var h=r(u.clientX,u.clientY);return t(h),void e.preventDefault()}}},{passive:!1})},e.buildElement=function(e,t){var r=document.createElement(e);return t&&(r.className=t.join(" ")),r},e.buildPreviewText=function(e,t){var r=document.createElement("tr"),n=document.createElement("td");n.textContent=t+":";var i=document.createElement("td");return r.appendChild(n),r.appendChild(i),e.appendChild(r),i},e.percentageString=function(e){return Math.round(100*e)+"%"},e}();e.Helpers.Events.callAfterDOMLoaded(function(){a.load(),u.applyStoredState()}),t.addObserver=function(e,t){var r=a.getColorPickerById(e);return r&&r.observers.push(t),!1},t.getValue=function(e){var t=a.getColorPickerById(e).value;return o.hexToRgb(t)},t.getValueHex=function(e){return a.getColorPickerById(e).value},t.setValue=function(e,t,r,i){var u={r:n(t,0,255),g:n(r,0,255),b:n(i,0,255)},l=o.rgbToHex(u);a.getColorPickerById(e).value=l},t.storeState=function(e){var t=a.getColorPickerById(e);u.storeState(t)},t.clearStoredState=function(e){var t=a.getColorPickerById(e);u.clearStoredState(t)}}(e.ColorPicker||(e.ColorPicker={}))}(Page||(Page={}));
var Page;!function(e){!function(n){var t,l=function(){function e(n){var t=this;this.observers=[],this.inputElement=n.querySelector("input"),this.labelSpanElement=n.querySelector("label > span"),this.inputElement.addEventListener("change",function(n){n.stopPropagation();var l=t.inputElement.files;if(1===l.length){t.labelSpanElement.innerText=e.truncate(l[0].name);for(var r=0,o=t.observers;r<o.length;r++){(0,o[r])(l)}}},!1)}return e.prototype.clear=function(){this.inputElement.value="",this.labelSpanElement.innerText=this.labelSpanElement.dataset.placeholder},e.truncate=function(n){return n.length>e.filenameMaxSize?n.substring(0,e.filenameMaxSize-1)+"..."+n.substring(n.length-(e.filenameMaxSize-1)):n},e.filenameMaxSize=16,e}(),r=function(){return function(e){var n=this;this.observers=[],this.buttonElement=e.querySelector("input"),this.buttonElement.addEventListener("click",function(e){e.stopPropagation();for(var t=0,l=n.observers;t<l.length;t++)(0,l[t])()},!1)}}();!function(e){var n,t;e.getFileUploadById=function(t){return e.load(),n[t]||null},e.getFileDownloadById=function(n){return e.load(),t[n]||null},e.load=function(){void 0===n&&(n=function(){for(var e={},n=document.querySelectorAll(".file-control.upload > input[id]"),t=0;t<n.length;t++){var r=n[t].parentElement;e[n[t].id]=new l(r)}return e}()),void 0===t&&(t=function(){for(var e={},n=document.querySelectorAll(".file-control.download > input[id]"),t=0;t<n.length;t++){var l=n[t].parentElement;e[n[t].id]=new r(l)}return e}())}}(t||(t={})),e.Helpers.Events.callAfterDOMLoaded(function(){t.load()}),n.addDownloadObserver=function(e,n){var l=t.getFileDownloadById(e);return!!l&&(l.observers.push(n),!0)},n.addUploadObserver=function(e,n){var l=t.getFileUploadById(e);return!!l&&(l.observers.push(n),!0)},n.clearFileUpload=function(e){t.getFileUploadById(e).clear()}}(e.FileControl||(e.FileControl={}))}(Page||(Page={}));

var Page;!function(e){!function(n){function t(e){var n=document.querySelector(e);return n||console.error("Cannot find element '"+e+"'."),n}function i(e){return t("input[type=checkbox][id="+e+"]")}var o=document.getElementById("canvas-container"),r=t("canvas[id="+"canvas"+"]"),c=document.getElementById("canvas-buttons-column"),a=i("fullscreen-checkbox-id"),u=i("side-pane-checkbox-id"),s=o.querySelector(".loader"),l=512,d=512;function f(){var e=r.getBoundingClientRect();return[Math.floor(e.width),Math.floor(e.height)]}!function(){function n(e){document.body.style.overflow=e?"hidden":"auto"}a&&(e.Helpers.Events.callAfterDOMLoaded(function(){n(a.checked),a.addEventListener("change",function(){n(a.checked)})}),u&&a.addEventListener("change",function(){a.checked&&(u.checked=!1)},!1))}();var v=[0,0],h=[];function g(e){return e+"px"}function m(){o.style.width="100vw";var e=f();if(a.checked?(o.style.height="100%",o.style.maxWidth="",o.style.maxHeight=""):(e[1]=e[0]*d/l,o.style.height=g(e[1]),o.style.maxWidth=g(l),o.style.maxHeight=g(d)),e[0]!==v[0]||e[1]!==v[1]){v=f();for(var n=0,t=h;n<t.length;n++){(0,t[n])(v[0],v[1])}}}e.Helpers.Events.callAfterDOMLoaded(m),a.addEventListener("change",m,!1),window.addEventListener("resize",m,!1);var p,y,E,w=[m],L=[],k=[],M=[],C=[],b=[],S=[],Y=[];function x(e,n){var t=r.getBoundingClientRect();return[(e-t.left)/t.width,(n-t.top)/t.height]}a&&a.addEventListener("change",function(){for(var e=a.checked,n=0,t=w;n<t.length;n++){(0,t[n])(e)}},!1),document.addEventListener("keydown",function(e){27===e.keyCode&&n.toggleFullscreen(!1)}),function(e){var n=[0,0],t=[0,0],i=!1;function o(e,t){n[0]=e,n[1]=t}function c(e,n){var t=x(e,n);o(t[0],t[1]),i=!0;for(var r=0,c=L;r<c.length;r++){(0,c[r])()}}function a(){if(i){i=!1;for(var e=0,n=k;e<n.length;e++){(0,n[e])()}}}function u(e,o){t[0]=e,t[1]=o;var r=x(e,o),c=r[0]-n[0],a=r[1]-n[1];if(n[0]=r[0],n[1]=r[1],i)for(var u=0,s=M;u<s.length;u++){(0,s[u])(c,a)}for(var l=0,d=C;l<d.length;l++){(0,d[l])(r[0],r[1])}}e.getMousePosition=function(){return[n[0],n[1]]},e.setMousePosition=o,e.isMouseDown=function(){return i},e.mouseDown=c,e.mouseUp=a,e.mouseMove=u,r&&(r.addEventListener("mousedown",function(e){0===e.button&&c(e.clientX,e.clientY)},!1),r.addEventListener("mouseenter",function(){for(var e=0,n=b;e<n.length;e++){(0,n[e])()}},!1),r.addEventListener("mouseleave",function(){for(var e=0,n=S;e<n.length;e++){(0,n[e])()}},!1),r.addEventListener("wheel",function(e){if(Y.length>0){for(var t=e.deltaY>0?1:-1,i=0,o=Y;i<o.length;i++){(0,o[i])(t,n)}return e.preventDefault(),!1}return!0},!1),window.addEventListener("mousemove",function(e){u(e.clientX,e.clientY)}),window.addEventListener("mouseup",function(e){0===e.button&&a()}),h.push(function(){u(t[0],t[1])}))}(p||(p={})),function(){var e=[],n=0;function t(e,n){var t=e.clientX-n.clientX,i=e.clientY-n.clientY;return Math.sqrt(t*t+i*i)}r&&(r.addEventListener("touchstart",function(i){for(var o=0===e.length,r=0;r<i.changedTouches.length;++r){for(var c=i.changedTouches[r],a=!1,u=0,s=e;u<s.length;u++){var l=s[u];if(c.identifier===l.id){a=!0;break}}a||e.push({id:c.identifier,clientX:c.clientX,clientY:c.clientY})}if(o&&e.length>0){var d=e[0];p.mouseDown(d.clientX,d.clientY)}else 2===e.length&&(n=t(e[0],e[1]))},!1),window.addEventListener("touchend",function(n){for(var t=e.length>0,i=0;i<n.changedTouches.length;++i)for(var o=n.changedTouches[i],r=0;r<e.length;++r)o.identifier===e[r].id&&(e.splice(r,1),r--);if(1===e.length){var c=x(e[0].clientX,e[0].clientY);p.setMousePosition(c[0],c[1])}else t&&0===e.length&&p.mouseUp()}),window.addEventListener("touchmove",function(i){for(var o=i.changedTouches,r=0;r<o.length;++r)for(var c=o[r],a=0,u=e;a<u.length;a++){var s=u[a];c.identifier===s.id&&(s.clientX=c.clientX,s.clientY=c.clientY)}var l=C.length+M.length;if(p.isMouseDown()&&l>0&&i.preventDefault(),1===e.length)p.mouseMove(e[0].clientX,e[0].clientY);else if(2===e.length){var d=t(e[0],e[1]),f=(n-d)/n;n=d;for(var v=x(.5*(e[0].clientX+e[1].clientX),.5*(e[0].clientY+e[1].clientY)),h=0,g=Y;h<g.length;h++)(0,g[h])(5*f,v)}},{passive:!1}))}(),function(e){var n={},i="-indicator-id";e.getIndicator=function(e){return t("#"+e+i)},e.getIndicatorSpan=function(e){if(!n[e]){var o=e+i;n[e]=t("#"+o+" span")}return n[e]}}(y||(y={})),function(n){var t="canvas",i="fullscreen",o="sidepane",r="true",c="false";function s(n,i){var o=i?r:c;e.Helpers.URL.setQueryParameter(t,n,o)}n.attachStorageEvents=function(){a&&a.addEventListener("change",function(){s(i,a.checked),e.Helpers.URL.removeQueryParameter(t,o)}),u&&u.addEventListener("change",function(){s(o,u.checked)})},n.applyStoredState=function(){e.Helpers.URL.loopOnParameters(t,function(n,s){n!==i||s!==r&&s!==c?n!==o||s!==r&&s!==c?(console.log("Removing invalid query parameter '"+n+"="+s+"'."),e.Helpers.URL.removeQueryParameter(t,n)):u&&(u.checked=s===r):a&&(a.checked=s===r)})}}(E||(E={})),E.applyStoredState(),E.attachStorageEvents(),n.Observers=Object.freeze({canvasResize:h,fullscreenToggle:w,mouseDown:L,mouseDrag:M,mouseEnter:b,mouseLeave:S,mouseMove:C,mouseWheel:Y,mouseUp:k}),n.getAspectRatio=function(){var e=f();return e[0]/e[1]},n.getCanvas=function(){return r},n.getCanvasContainer=function(){return o},n.getSize=function(){return f()},n.getMousePosition=function(){return p.getMousePosition()},n.isFullScreen=function(){return a&&a.checked},n.isMouseDown=function(){return p.isMouseDown()},n.setIndicatorText=function(e,n){var t=y.getIndicatorSpan(e);t&&(t.innerText=n)},n.setIndicatorVisibility=function(e,n){var t=y.getIndicator(e);t&&(t.style.display=n?"":"none")},n.setIndicatorsVisibility=function(e){document.getElementById("indicators").style.display=e?"":"none"},n.setMaxSize=function(e,n){l=e,d=n,m()},n.setResizable=function(e){c.style.display=e?"":"none"},n.setLoaderText=function(e){s&&(s.querySelector("span").innerText=e)},n.showLoader=function(e){s&&(s.style.display=e?"block":"")},n.toggleFullscreen=function(e){if(a&&e!==a.checked)if(a.checked=e,"function"==typeof window.CustomEvent)a.dispatchEvent(new CustomEvent("change"));else if("function"==typeof CustomEvent.prototype.initCustomEvent){var n=document.createEvent("CustomEvent");n.initCustomEvent("change",!1,!1,void 0),a.dispatchEvent(n)}}}(e.Canvas||(e.Canvas={}))}(Page||(Page={}));
Page.Canvas.setMaxSize(512,512);